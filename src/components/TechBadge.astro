---
interface Props {
    name: string;
}

const { name } = Astro.props;

// Mapeo de nombres a logos de shields.io (colores desaturados)
// Formato: https://img.shields.io/badge/{label}-{color}?style=flat&logo={logo}&logoColor=white
const TECH_BADGES: Record<string, string> = {
    // Backend
    java: "Java-8B7355?style=flat&logo=openjdk&logoColor=white",
    spring: "Spring-5A7A4F?style=flat&logo=spring&logoColor=white",
    "spring boot":
        "Spring_Boot-5A7A4F?style=flat&logo=spring-boot&logoColor=white",

    // Databases
    oracle: "Oracle-A65555?style=flat&logo=oracle&logoColor=white",
    mysql: "MySQL-5A6B7A?style=flat&logo=mysql&logoColor=white",
    mongodb: "MongoDB-5A7A5F?style=flat&logo=mongodb&logoColor=white",
    mongo: "MongoDB-5A7A5F?style=flat&logo=mongodb&logoColor=white",

    // DevOps & Tools
    docker: "Docker-5A7A8B?style=flat&logo=docker&logoColor=white",
    kafka: "Apache_Kafka-4A4A4A?style=flat&logo=apache-kafka&logoColor=white",
    gitlab: "GitLab-A67A5A?style=flat&logo=gitlab&logoColor=white",
    prometheus: "Prometheus-A66A5A?style=flat&logo=prometheus&logoColor=white",
    grafana: "Grafana-A67555?style=flat&logo=grafana&logoColor=white",

    // Frontend
    react: "React-6A8A95?style=flat&logo=react&logoColor=white",
    astro: "Astro-A67055?style=flat&logo=astro&logoColor=white",
    tailwind:
        "Tailwind_CSS-5A7A7F?style=flat&logo=tailwind-css&logoColor=white",
    tailwindcss:
        "Tailwind_CSS-5A7A7F?style=flat&logo=tailwind-css&logoColor=white",
    html: "HTML5-A66A55?style=flat&logo=html5&logoColor=white",
    css: "CSS3-5A6B7A?style=flat&logo=css3&logoColor=white",

    // Mobile
    flutter: "Flutter-5A6B7F?style=flat&logo=flutter&logoColor=white",
    dart: "Dart-5A6B7A?style=flat&logo=dart&logoColor=white",

    // Game Dev & 3D
    unity: "Unity-4A4A4A?style=flat&logo=unity&logoColor=white",
    unreal: "Unreal_Engine-3A3A3A?style=flat&logo=unreal-engine&logoColor=white",
    blender: "Blender-A67555?style=flat&logo=blender&logoColor=white",
    zbrush: "ZBrush-4A4A4A?style=flat",
    "z-brush": "ZBrush-4A4A4A?style=flat",
    maya: "Autodesk_Maya-6A7A8A?style=flat",

    // Design
    figma: "Figma-A66A5F?style=flat&logo=figma&logoColor=white",
    photoshop:
        "Adobe_Photoshop-6A7A8A?style=flat&logo=adobe-photoshop&logoColor=white",

    // Languages
    "c#": "C%23-5A7A5A?style=flat&logo=c-sharp&logoColor=white",

    // Other
    yeoman: "Yeoman-9A8A6A?style=flat",
    infinispan: "Infinispan-4A4A4A?style=flat",
    akhq: "AKHQ-4A4A4A?style=flat",
};

// Función para obtener la URL del badge
function getBadgeUrl(techName: string): string {
    const lower = techName.toLowerCase().trim();

    // Buscar coincidencia exacta primero
    if (TECH_BADGES[lower]) {
        return `https://img.shields.io/badge/${TECH_BADGES[lower]}`;
    }

    // Buscar coincidencia parcial
    for (const [key, value] of Object.entries(TECH_BADGES)) {
        if (lower.includes(key) || key.includes(lower)) {
            return `https://img.shields.io/badge/${value}`;
        }
    }

    // Fallback: crear badge genérico con color desaturado
    const label = techName.replace(/\s+/g, "_");
    return `https://img.shields.io/badge/${label}-6A7A8A?style=flat`;
}

const badgeUrl = getBadgeUrl(name);
---

<img
    src={badgeUrl}
    alt={name}
    class="transition-all duration-300 hover:scale-105"
    loading="lazy"
/>
