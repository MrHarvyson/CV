---
const { proyectos } = Astro.props;
import Icono_lista from "../icons/Icono_lista.astro";
import Icono_herramienta from "../icons/Icono_herramienta.astro";
import TechBadge from "../TechBadge.astro";
interface Proyectos {
    img: string;
    empresa: string;
    ano: string;
    proyectos: {
        titulo: string;
        descripcion: string;
        tareas: string[];
        tectnologias: string[];
    }[];
}
---

<div class="relative group">
    <!-- Timeline Dot (smaller, no glow) -->
    <div
        class="absolute top-6 -left-[38px] md:-left-[54px] w-3 h-3 rounded-full bg-dark border-2 border-primary transition-transform duration-300 z-10"
    >
    </div>

    <!-- Card -->
    <div
        class="relative bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-6 md:p-8 pb-12 md:pb-14 hover:bg-white/10 transition-colors duration-300 shadow-lg"
    >
        <div
            class="flex flex-col md:flex-row md:items-baseline justify-between gap-2 mb-4"
        >
            <div class="flex items-center gap-4">
                <!-- Acento vertical a la izquierda -->
                <span
                    class="w-1.5 h-8 rounded-full bg-primary/90 -translate-y-0.5"
                ></span>

                <!-- Título con efecto de gradiente al hover y subrayado animado -->
                <div class="relative">
                    <h4
                        class="text-[clamp(1.125rem,2.2vw,1.875rem)] font-heading font-extrabold text-white leading-snug tracking-tight transition-colors duration-300 group-hover:text-primary max-w-[40ch] break-words"
                        style="hyphens: auto;"
                    >
                        {proyectos.titulo}
                    </h4>
                    <span
                        class="absolute left-0 -bottom-1 h-0.5 bg-primary rounded transition-all duration-300 w-0 group-hover:w-full"
                    ></span>
                </div>
            </div>

            <!-- fecha movida al footer del módulo -->
        </div>

        <p class="text-gray-300 mb-6 leading-relaxed">
            {proyectos.descripcion}
        </p>

        <div class="space-y-6">
            <!-- Tareas -->
            <div>
                <div class="flex items-center gap-2 mb-3 text-secondary group">
                    <Icono_lista />
                    <span
                        class="text-sm text-white font-semibold uppercase tracking-wider"
                        >Responsabilidades</span
                    >
                </div>
                <ul class="space-y-2">
                    {
                        proyectos.tareas.map((tarea: string) => (
                            <li class="text-sm text-gray-400 flex items-start gap-2">
                                <span class="mt-1.5 w-1.5 h-1.5 rounded-full bg-gray-600 flex-shrink-0" />
                                <span>{tarea}</span>
                            </li>
                        ))
                    }
                </ul>
            </div>

            <!-- Tecnologías -->
            <div>
                <div class="flex items-center gap-2 mb-3 text-primary group">
                    <Icono_herramienta />
                    <span
                        class="text-sm text-white font-semibold uppercase tracking-wider"
                        >Tecnologías</span
                    >
                </div>
                <div class="flex flex-wrap gap-2">
                    {
                        proyectos.tecnologias.map((tecnologia: string) => (
                            <TechBadge name={tecnologia} />
                        ))
                    }
                </div>
            </div>
        </div>
        <!-- Fecha estilizada en la esquina inferior derecha del módulo -->
        <div class="absolute right-4 bottom-4">
            <div
                class="flex items-center gap-2 text-xs text-white/90 bg-gradient-to-r from-white/5 to-white/3 px-2.5 py-1 rounded-lg backdrop-blur-sm border border-white/10 shadow-sm hover:shadow-md transition-shadow duration-200 whitespace-nowrap"
                title={proyectos.titulo + " — " + proyectos.ano}
                aria-hidden="false"
            >
                <!-- Icono de calendario pequeño -->
                <svg
                    class="w-4 h-4 text-primary"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true"
                >
                    <rect
                        x="3"
                        y="5"
                        width="18"
                        height="16"
                        rx="2"
                        stroke="currentColor"
                        stroke-width="1.5"
                        fill="transparent"></rect>
                    <path
                        d="M16 3v4M8 3v4"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"></path>
                </svg>
                <span class="font-mono text-[0.675rem] text-gray-200"
                    >{proyectos.ano}</span
                >
            </div>
        </div>
    </div>
</div>
